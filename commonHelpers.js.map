{"version":3,"file":"commonHelpers.js","sources":["../src/js/galleryApi.js","../src/main.js","../src/js/topBtn.js"],"sourcesContent":["import axios from 'axios';\n\nexport class GalleryApi {\n  #apiKey = '18667452-b6cf3b15ecb06490e1251bb0b';\n  #baseUrl = \"https://pixabay.com/api\";\n\n  constructor() {\n    this.searchQuery = '';\n    this.perPage = 40;\n    this.page = 1;\n    this.imageType = 'photo';\n    this.orientation = 'horizontal';\n    this.safeSearch = true;\n  }\n\n  async fetchPhotos() {\n    const params = {\n      q: this.query,\n      image_type: this.imageType,\n      orientation: this.orientation,\n      per_page: this.perPage,\n      key: this.#apiKey,\n      page: this.page,\n    };\n\n    try {\n      const response = await axios.get(`${this.#baseUrl}/`, { params });\n      this.incrementPage();\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching photos:', error);\n      throw error;\n    }\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  get query() {\n    return this.searchQuery.trim();\n  }\n\n  set query(value) {\n    this.searchQuery = value;\n  }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { GalleryApi } from './js/galleryApi';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryList = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('[data-action=\"load-more\"]');\nconst spinner = document.querySelector('.spinner');\n\nconst galleryApi = new GalleryApi();\n\nsearchForm.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', fetchPhotos);\n\nif (galleryApi.query === '') {\n  hideButton();\n  spinnerOff();\n  disableButton();\n  galleryList.innerHTML = '';\n}\n\nasync function onSubmit(event) {\n  event.preventDefault();\n\n  galleryApi.query = event.target.elements.query.value;\n\n  if (galleryApi.query === '') {\n    hideButton();\n    disableButton();\n    galleryList.innerHTML = '';\n    displayWarningToast('Sorry, there are no images matching your search query. Please try again.');\n    return;\n  }\n\n  galleryList.innerHTML = '';\n  galleryApi.resetPage();\n  await fetchPhotos();\n}\n\nasync function fetchPhotos() {\n  showButton();\n  spinnerOn();\n  disableButton();\n\n  try {\n    const photo = await galleryApi.fetchPhotos();\n\n    if (photo.totalHits === 0) {\n      hideButton();\n      displayErrorToast('Sorry, there are no images matching your search query. Please try again.');\n    }\n\n    if (galleryApi.page === 2) {\n      displaySuccessToast(`Hooray! We found ${photo.totalHits} images.`);\n    }\n\n    if ((galleryApi.page - 1) * galleryApi.perPage >= photo.totalHits) {\n      hideButton();\n      displayInfoToast(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n    const markup = createGalleryCard(photo.hits);\n    galleryList.insertAdjacentHTML('beforeend', markup);\n    const modal = new SimpleLightbox('.gallery a');\n  } catch (error) {\n    displayErrorToast(`${error.message}`);\n  } finally {\n    spinnerOff();\n    enableButton();\n  }\n}\n\nfunction createGalleryCard(photos) {\n  return photos.map(({ largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads, }) => {\n    return `\n    <div class=\"photo-card\">\n      <a class=\"card_link\" href=\"${largeImageURL}\">\n        <img class=\"card_img\" src=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes<br>${likes}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Views<br>${views}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Comments<br>${comments}</b>\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads<br>${downloads}</b>\n        </p>\n      </div>\n    </div>`;\n  })\n}\n\nfunction showButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideButton() {\n  loadMoreBtn.classList.add('is-hidden');\n  loadMoreBtn.innerHTML = '';\n}\n\nfunction enableButton() {\n  loadMoreBtn.removeAttribute('disabled');\n  loadMoreBtn.innerHTML = 'Load more';\n}\n\nfunction disableButton() {\n  loadMoreBtn.setAttribute('disabled', 'true');\n  loadMoreBtn.innerHTML = 'Loading';\n}\n\nfunction spinnerOn() {\n  spinner.classList.remove('is-hidden');\n}\n\nfunction spinnerOff() {\n  spinner.classList.add('is-hidden');\n}\n\nfunction displayWarningToast(message) {\n  iziToast.warning({\n    title: 'Warning',\n    message: message,\n    position: 'topRight',\n    color: 'yellow',\n  });\n}\n\nfunction displayErrorToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    color: 'red',\n  });\n}\n\nfunction displaySuccessToast(message) {\n  iziToast.success({\n    title: 'Success',\n    message: message,\n    position: 'topRight',\n    color: 'green',\n  });\n}\n\nfunction displayInfoToast(message) {\n  iziToast.info({\n    title: 'Info',\n    message: message,\n    position: 'topRight',\n    color: 'blue',\n  });\n}","    function trackScroll() {\n      var scrolled = window.pageYOffset;\n      var coords = document.documentElement.clientHeight;\n  \n      if (scrolled > coords) {\n        goTopBtn.classList.add('back_to_top-show');\n      }\n      if (scrolled < coords) {\n        goTopBtn.classList.remove('back_to_top-show');\n      }\n    }\n  \n    function backToTop() {\n      if (window.pageYOffset > 0) {\n        window.scrollBy(0, -80);\n        setTimeout(backToTop, 0);\n      }\n    }\n  \n    var goTopBtn = document.querySelector('.back_to_top');\n  \n    window.addEventListener('scroll', trackScroll);\n    goTopBtn.addEventListener('click', backToTop);\n"],"names":["GalleryApi","__privateAdd","_apiKey","_baseUrl","params","__privateGet","response","axios","error","value","searchForm","galleryList","loadMoreBtn","spinner","galleryApi","onSubmit","fetchPhotos","hideButton","spinnerOff","disableButton","event","displayWarningToast","showButton","spinnerOn","photo","displayErrorToast","displaySuccessToast","displayInfoToast","markup","createGalleryCard","modal","SimpleLightbox","enableButton","photos","largeImageURL","tags","likes","views","comments","downloads","message","iziToast","trackScroll","scrolled","coords","goTopBtn","backToTop"],"mappings":"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"}